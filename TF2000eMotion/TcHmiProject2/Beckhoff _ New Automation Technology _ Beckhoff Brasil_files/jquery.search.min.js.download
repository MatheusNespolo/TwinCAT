var jsSearchSrc=document.currentScript.src;$(function(){"undefined"==typeof console&&(this.console={log:function(){}}),$('[data-plugin="search"]').search()}),function(b){b.fn.search=function(F){return this.each(function(){var s,a,i,t,n,h,r,l,u,c,o,d,g,f,m,p,v,L,y,C,w=b.extend({formClass:"search__form",formInputClass:"search__input",formIconClass:"search__input-icon",formSpinnerClass:"search__input-spinner",formPopoverClass:"search__input-popover",formButtonClass:"search__button",formInputMinLength:2,typeaheadClass:"search__typeahead",typeaheadTermsClass:"search__typeahead-terms",typeaheadPagesClass:"search__typeahead-pages",typeaheadDownloadsClass:"search__typeahead-downloads",typeaheadProductsClass:"search__typeahead-products",typeaheadInputMinLength:3,typeaheadInputDelay:600,resultClass:"search__results",resultTotalClass:"search__results-total",resultSearchValueClass:"search__search-value",resultFacetListClass:"search__facet-list",resultItemListClass:"search__item-list",resultListItemClass:"search__list-item",resultItemListLimitClass:"search__item-list-limit",resultItemListPaginationClass:"search__item-list-pagination",resultFacetListDelay:400},F),e=b(this),S=b(this).index('[data-plugin="search"]'),_=new N,P=_.getUrlVars("dev");void 0===P||1!=P&&"true"!=P||(P=new URL(jsSearchSrc),_.setConnection({host:P.origin,path:P.pathname.substring(0,P.pathname.lastIndexOf("/"))+"/search.proxy.php?callback=?"})),"undefined"!=typeof previewClient&&""!==previewClient&&_.setCmsPreviewClient(previewClient),_.setIndex(S),void 0!==e.data("template")&&_.setTemplate(e.data("template")),void 0!==e.data("cms-language")&&_.setCmsLanguage(e.data("cms-language")),void 0!==e.data("cms-native-language")&&_.setCmsNativeLanguage(e.data("cms-native-language")),void 0!==e.data("pim-language")?_.setPimLanguage(e.data("pim-language")):_.setPimLanguage("de"),void 0!==e.data("df-result-page-url")&&_.setDfResultPageUrl(e.data("df-result-page-url")),s=e.find("."+w.formClass),a=e.find("."+w.formInputClass),P=e.find("."+w.formButtonClass),t=e.find("."+w.formIconClass),n=e.find("."+w.formSpinnerClass),r=e.find("."+w.typeaheadClass),l=e.find("."+w.typeaheadTermsClass),a.on("focus",function(e){e.preventDefault(),0<a.val().length&&a.val(""),r.is(":hidden")||r.hide()}),a.on("input",function(e){e.preventDefault();var t=a.val();t.length>=w.typeaheadInputMinLength?(clearTimeout(i),i=setTimeout(function(){_.setTypeaheadValue(t),h()},w.typeaheadInputDelay)):0!=t.length||r.is(":hidden")||r.hide()}),P.on("blur",function(){a.popover("hide")}),"flyout"==_.getTemplate()?(u=e.find("."+w.typeaheadPagesClass),o=e.find("."+w.typeaheadProductsClass),c=e.find("."+w.typeaheadDownloadsClass),h=function(){t.hide(),n.show(),_.view("typeahead").done(function(e){r.is(":hidden")&&r.show(),e&&e.view&&e.view.terms?l.html(e.view.terms):l.html(""),e&&e.view&&e.view.pages?u.html(e.view.pages):u.html(""),e&&e.view&&e.view.downloads?c.html(e.view.downloads):c.html(""),e&&e.view&&e.view.products?o.html(e.view.products):o.html(""),t.show(),n.hide()})},s.on("submit",function(e){e.preventDefault();var e=a.attr("name"),t=a.val();t.length<w.formInputMinLength?a.popover("show"):window.location=s.attr("action")+"?"+e+"="+encodeURIComponent(t)}),void 0!==e.data("number-of-suggestions")&&_.setTypeaheadNumberOfSuggestions(e.data("number-of-suggestions")),void 0!==e.data("urls")&&_.setTypeaheadUrls(e.data("urls")),a.val(""),a.popover({selector:'[data-bs-toggle="'+w.formPopoverClass+'"]',container:a.parent(),trigger:"manual",placement:"bottom",html:!0})):"result"==_.getTemplate()&&(m=e.find("."+w.resultClass),p=e.find("."+w.resultTotalClass),v=e.find("."+w.resultSearchValueClass),L=e.find("."+w.resultFacetListClass),y=e.find("."+w.resultItemListClass),S=e.find("."+w.resultItemListLimitClass),C=e.find("."+w.resultItemListPaginationClass),h=function(){t.hide(),n.show(),_.view("typeahead").done(function(e){r.is(":hidden")&&r.show(),e&&e.view?l.html(e.view):l.html(""),t.show(),n.hide()})},g=function(){_.setSearchFacetName(L.data("facet-name")),_.view("facetList").done(function(e){y.is(":hidden")&&y.show(),e&&void 0!==e.view&&(1<b("li",L).length&&b("li",L).slice(1).remove(),L.append(e.view))})},d=function(){_.view("itemList").done(function(e){m.is(":hidden")&&m.show(),v.text(_.getSearchValue()).html(),e&&void 0!==e.total&&!_.getSearchFilterQueryList()&&p.html(e.total),_.getSearchListOffset()?(y.append(e.view),_.setSearchListOffset(0)):y.html(e.view),e.pagination&&!0===e.pagination?C.is(":hidden")&&C.show():C.not(":hidden")&&C.hide()})},s.on("submit",function(e){e.preventDefault();e=a.val();e.length<w.formInputMinLength?a.popover("show"):(a.val(""),r.not(":hidden")&&r.hide(),_.setSearchValue(e),g(),d())}),l.on("click","a",function(e){e.preventDefault(),a.val(""),r.not(":hidden")&&r.hide(),_.setSearchValue(b(this).data("q")),g(),d()}),L.on("click",".nav-link",function(e){e.preventDefault();var e=b(this).data("facet-name"),t=b(this).data("facet-value");b(".nav-link.active",L).removeClass("active"),b(this).addClass("active"),void 0!==t&&""!=t?_.addSearchFilterQuery(e,t):_.setSearchFilterQueryList(null),clearTimeout(f),f=setTimeout(function(){d()},w.resultFacetListDelay)}),b("a",C).on("click",function(e){e.preventDefault(),0<b("."+w.resultListItemClass,y).length&&(_.setSearchListOffset(b("."+w.resultListItemClass,y).length),d())}),_.setSearchListLimit(S.val()),void 0!==(P=_.getUrlVars("q"))&&""!==P?(_.setSearchValue(P),g(),d()):(s.show(),a.trigger("focus")))})};var N=function(){this.connection={host:webappUrl,path:"search/search.proxy.php?callback=?",dataType:"jsonp",jsonp:"json.wrf"},this.debug=null,this.index=null,this.template=null,this.cmsLanguage=null,this.cmsNativeLanguage=null,this.pimLanguage=null,this.cmsPreviewClient=null,this.dfResultPageUrl=null,this.typeaheadValue=null,this.typeaheadNumberOfSuggestions=null,this.typeaheadUrls=null,this.searchValue=null,this.searchFacetName=null,this.searchFilterQueryList=null,this.searchListLimit=null,this.searchListOffset=null,this.searchListRows=null,this.getConnection=function(){return this.connection},this.setConnection=function(e){this.connection=b.extend(this.connection,e)},this.getDebug=function(){return this.debug},this.setDebug=function(e){this.debug=e},this.getIndex=function(){return this.index},this.setIndex=function(e){this.index=e},this.getTemplate=function(){return this.template},this.setTemplate=function(e){this.template=e},this.getCmsLanguage=function(){return this.cmsLanguage},this.setCmsLanguage=function(e){this.cmsLanguage=e},this.getCmsNativeLanguage=function(){return this.cmsNativeLanguage},this.setCmsNativeLanguage=function(e){this.cmsNativeLanguage=e},this.getPimLanguage=function(){return this.pimLanguage},this.setPimLanguage=function(e){this.pimLanguage=e},this.getCmsPreviewClient=function(){return this.cmsPreviewClient},this.setCmsPreviewClient=function(e){this.cmsPreviewClient=e},this.getDfResultPageUrl=function(){return this.dfResultPageUrl},this.setDfResultPageUrl=function(e){this.dfResultPageUrl=e},this.getTypeaheadValue=function(){return this.typeaheadValue},this.setTypeaheadValue=function(e){this.typeaheadValue=e},this.getTypeaheadNumberOfSuggestions=function(){return this.typeaheadNumberOfSuggestions},this.setTypeaheadNumberOfSuggestions=function(e){this.typeaheadNumberOfSuggestions=e},this.getTypeaheadUrls=function(){return this.typeaheadUrls},this.setTypeaheadUrls=function(e){this.typeaheadUrls=e},this.getSearchValue=function(){return this.searchValue},this.setSearchValue=function(e){this.searchValue=e},this.getSearchFacetName=function(){return this.searchFacetName},this.setSearchFacetName=function(e){this.searchFacetName=e},this.getSearchFilterQueryList=function(){return this.searchFilterQueryList},this.setSearchFilterQueryList=function(e){this.searchFilterQueryList=e},this.addSearchFilterQuery=function(e,t){null===this.searchFilterQueryList&&(this.searchFilterQueryList={}),this.searchFilterQueryList[e]=t},this.removeSearchFilterQuery=function(e){null!==this.searchFilterQueryList&&void 0===this.searchFilterQueryList[e]&&delete this.searchFilterQueryList[e]},this.getSearchListLimit=function(){return this.searchListLimit},this.setSearchListLimit=function(e){this.searchListLimit=e},this.getSearchListOffset=function(){return this.searchListOffset},this.setSearchListOffset=function(e){this.searchListOffset=e},this.view=function(e){var t,s,a,i,n;switch(e){case"typeahead":t={action:e,index:this.index,template:this.template,cmsLanguage:this.cmsLanguage,cmsNativeLanguage:this.cmsNativeLanguage,pimLanguage:this.pimLanguage,cmsPreviewClient:this.cmsPreviewClient,typeaheadValue:this.typeaheadValue,typeaheadNumberOfSuggestions:this.typeaheadNumberOfSuggestions,typeaheadUrls:this.typeaheadUrls};break;case"itemList":t={action:e,index:this.index,template:this.template,cmsLanguage:this.cmsLanguage,cmsNativeLanguage:this.cmsNativeLanguage,cmsPreviewClient:this.cmsPreviewClient,dfResultPageUrl:this.dfResultPageUrl,searchValue:this.searchValue,searchFilterQueryList:this.searchFilterQueryList,searchListLimit:this.searchListLimit,searchListOffset:this.searchListOffset};break;case"facetList":t={action:e,index:this.index,template:this.template,cmsLanguage:this.cmsLanguage,cmsNativeLanguage:this.cmsNativeLanguage,cmsPreviewClient:this.cmsPreviewClient,searchValue:this.searchValue,searchFacetName:this.searchFacetName}}if(t)return this.debug&&(i=t,n="",b.each(i,function(s,e){b.isPlainObject(e)?b.each(e,function(e,t){n+=s+"["+e+"]: "+t+"\n"}):n+=s+": "+e+"\n"}),console.log(n)),i=this.connection,a=t,a=b.ajax({url:i.host+i.path,dataType:i.dataType,jsonp:i.jsonp,cache:null,data:a}).fail(function(e,t,s){}),s=new b.Deferred,a.done(function(e){s.resolve(e)}),a.fail(function(e){s.reject(e)}),s.promise()},this.getUrlVars=function(e){var a={};return decodeURIComponent(location.search).replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,s){a[t]=s}),e?a[e]:a}}}(jQuery);
//# sourceMappingURL=jquery.search.min.js.map