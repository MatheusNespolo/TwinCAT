var jsListingSrc=document.currentScript.src;$(function(){"undefined"==typeof console&&(this.console={log:function(){}}),$('[data-plugin="listing"][data-subtemplate!="modal"]').listing(),$('[data-plugin="listing"][data-subtemplate="modal"]').listing({itemListClass:"item-list__modal"})}),function(y){y.fn.listing=function(b){return this.each(function(){var t,e,i,a,s,l,n,c,o,d,r,h,u,f,p,m=y.extend({itemListClass:"item-list",itemListTotalClass:"item-list__total",itemListLimitClass:"item-list__limit",itemListPaginationClass:"item-list__pagination",filterListClass:"item-list__filter",activeFilterListClass:"item-list__filter-active",filterTime:400},b),g=y(this),v=y(this).attr("id"),L=y(this).index('[data-plugin="listing"]'),k=new F,V=k.getUrlVars("dev");void 0===V||1!=V&&"true"!=V||(V=new URL(jsListingSrc),k.setConnection({host:V.origin,path:V.pathname.substring(0,V.pathname.lastIndexOf("/"))+"/listing.proxy.php?callback=?"})),"undefined"!=typeof previewClient&&""!==previewClient&&k.setCmsPreviewClient(previewClient),k.setIndex(L),void 0!==g.data("section-id")&&k.setSectionId(g.data("section-id")),void 0!==g.data("template")&&k.setTemplate(g.data("template")),void 0!==g.data("subtemplate")&&k.setSubtemplate(g.data("subtemplate")),void 0!==g.data("cms-language")&&k.setCmsLanguage(g.data("cms-language")),void 0!==g.data("cms-native-language")&&k.setCmsNativeLanguage(g.data("cms-native-language")),void 0!==g.data("cms-page-id")&&k.setCmsPageId(g.data("cms-page-id")),void 0!==g.data("search")&&k.setSearchValueList(g.data("search")),void 0!==g.data("column-options")&&k.setColumnOptionList(g.data("column-options")),void 0!==g.data("bs-toggle")&&"tab"==g.data("bs-toggle")?(r={},t=y(g.attr("data-bs-target")),e=t.find("."+m.itemListClass),a=t.find("."+m.itemListLimitClass),s=t.find("."+m.itemListPaginationClass),h=function(){k.view("itemList").done(function(t){t&&t.data&&(t.total&&0<t.total&&g.hasClass("hidden")&&g.removeClass("hidden"),k.getListOffset()?(y("ul",e).append(t.data),k.setListOffset(null)):e.html(t.data),t.pagination&&!0===t.pagination?s.hasClass("hidden")&&s.removeClass("hidden"):s.not(".hidden")&&s.addClass("hidden"),k.getListRows())&&k.setListRows(null)})},y("a",s).on("click",function(t){t.preventDefault(),0<y("ul",e).length&&(k.setListOffset(y("ul > li",e).length),h())}),y(t).on("click",".zoom",function(t){t.preventDefault(),y(this).magnificPopup({type:"image",closeBtnInside:!1,image:{titleSrc:function(t){return t.el.attr("data-title")+"<small>"+t.el.attr("data-copyright")+"</small>"}},retina:{ratio:2,replaceSrc:function(t){return t.el.context.dataset.hrefRetina}}}).magnificPopup("open")}),k.setListLimit(y('input[type="radio"]:checked,input[type="hidden"]',a).val()),g.on("shown.bs.tab",function(){void 0===r[t.attr("id")]&&(r[t.attr("id")]=!0,void 0!==g.data("search")&&k.setSearchValueList(g.data("search")),h())}),0===g.parent().index()&&g.trigger("shown.bs.tab")):(null!==history.state&&"object"==typeof history.state&&void 0!==history.state[v]&&k.setHistoryValueList(history.state[v]),e=y(this).find("."+m.itemListClass),i=y(this).find("."+m.itemListTotalClass),a=y(this).find("."+m.itemListLimitClass),s=y(this).find("."+m.itemListPaginationClass),n=y(this).find(".filter-compact"),l=y(this).find(".toolbar-container."+m.filterListClass),c=y(this).find("."+m.filterListClass+" .contact-filter"),o=y(this).find("."+m.activeFilterListClass),h=function(){var t;void 0===g.data("load-content-on-init")||0!=g.data("load-content-on-init")||y.isEmptyObject(k.getFilterValueList())?t=!0:y.each(k.getFilterValueList(),function(){if(0<this.facetFieldValues.length)return!(t=!0)}),t?(k.setListLimit(y('input[type="radio"]:checked,input[type="hidden"]',a).val()),k.view("itemList").done(function(t){t&&t.data&&(t.total&&0<t.total&&g.hasClass("hidden")&&g.removeClass("hidden"),k.getListOffset()?((0<y("> ul",e).length?y("> ul",e):0<y("> table > tbody",e).length?y("> table > tbody",e):e).append(t.data),k.setListOffset(null)):(i.text(t.total),e.html(t.data)),t.pagination&&!0===t.pagination?s.hasClass("hidden")&&s.removeClass("hidden"):s.not(".hidden")&&s.addClass("hidden"),k.getListRows())&&k.setListRows(null)})):(e.empty(),g.hasClass("hidden")&&g.removeClass("hidden"))},V=function(){0<n.length?(y('.filter-compact__dropdown input[type="checkbox"]:not([checked])',n).prop("checked",!1),y('.filter-compact__dropdown input[type="checkbox"][checked]',n).prop("checked",!0),y(".filter-compact__dropdown .monthpicker",n).val(""),y('.filter-compact__dropdown form[data-facet-field-type="checkbox"]',n).each(function(){k.addFilterPanelValue(y(this).data("facet-field-name"))}),k.view("filterStatus").done(function(i){i&&i.data&&(y('.filter-compact__dropdown form[data-facet-field-type="checkbox"] input',n).each(function(){var t=y(this).data("facet-field"),e=y(this).val();(void 0===i.data[t][e]||void 0!==i.data[t][e]&&0===i.data[t][e])&&y(this).parent().remove()}),y('.filter-compact__dropdown form[data-facet-field-type="checkbox"]',n).each(function(){y("input",this).length<2&&y(this).closest(".filter-compact__dropdown").remove()}))})):0<l.length?(y('form[data-facet-field-type="checkbox"] input:not([checked])',g).prop("checked",!1),y('form[data-facet-field-type="checkbox"] input[checked]',g).prop("checked",!0),y('form[data-facet-field-type="checkbox"]',g).each(function(){k.addFilterPanelValue(y(this).data("facet-field-name"))}),k.view("filterStatus").done(function(i){i&&i.data&&y('form[data-facet-field-type="checkbox"] .filter-select-default input',g).each(function(){var t=y(this).data("facet-field"),e=y(this).val();(void 0===i.data[t][e]||void 0!==i.data[t][e]&&0===i.data[t][e])&&y(this).parent().parent().remove()})})):0<c.length&&(y("select option[selected]",c).prop("selected",!0),y('form[data-facet-field-type="select"]',g).each(function(){k.addFilterPanelValue(y(this).data("facet-field-name"))}),y('form[data-facet-field-type="datalist"]',g).each(function(){k.addFilterPanelValue(y(this).data("facet-field-name"))}),k.view("filterStatus").done(function(i){i&&i.data&&y('form[data-facet-field-type="datalist"] option',g).each(function(){var t=y(this).data("facet-field-name"),e=y(this).data("facet-value");(void 0===i.data[t][e]||void 0!==i.data[t][e]&&0===i.data[t][e])&&y(this).remove()})}))},L=function(){0<n.length?(null!==k.getHistoryValueList()&&y.each(k.getHistoryValueList(),function(t,e){var i=y(e.selector),a=i.attr("id"),s=i.attr("name"),l=i.val(),n=i.next("label").text(),c=i.closest("form").data("has-subfilters");"checkbox"==e.type&&1==i.length?(i.prop("checked")!=e.checked&&1==e.checked?u(a,!1,l,n):i.prop("checked")!=e.checked&&0==e.checked&&f(a,!1),i.prop("checked",e.checked),1==e.checked&&void 0!==c&&y('form[data-subfilter-for="'+c+"_"+l+'"]').closest(".filter-compact__dropdown").show()):"radio"!=e.type||1!=i.length||i.closest(".filter-compact__dropdown-check").hasClass("has-monthpicker")?"radio"==e.type&&null!==e.plugin&&void 0!==e.plugin.name&&"monthpicker"==e.plugin.name&&(!0===e.checked&&void 0!==e.plugin.selector&&1==y(e.plugin.selector).length?(n=n+" "+e.value,i.prop("checked",e.checked),i.val(e.value),i.data("timestamp",e.plugin.selectedTime),y(e.plugin.selector).val(e.value),u(!1,s,e.value,n)):!1===e.checked&&void 0!==e.plugin.selector&&1==y(e.plugin.selector).length&&(y('input[name="'+s+'"]').prop("checked",!1),f(!1,s))):(0<i.closest("."+m.itemListLimitClass).length?i.closest(".filter-compact__dropdown").children("a").text(n):i.prop("checked")!=e.checked&&1==e.checked?u(!1,s,l,n):i.prop("checked")!=e.checked&&0==e.checked&&f(!1,s),i.prop("checked",e.checked))}),y('form[data-facet-field-type="checkbox"], form[data-facet-field-type="date"]',n).each(function(){var t,e=y(this).data();void 0!==e.facetFieldName&&""!==e.facetFieldName&&(t=e.facetFieldName,delete e.facetFieldName,k.addFilterObject(t,e),y("input:checked",this).each(function(){y(this).parent().hasClass("has-monthpicker")&&void 0!==y(this).data("timestamp")?k.addFilterValue(t,y(this).data("timestamp")):k.addFilterValue(t,y(this).val())}))})):0<l.length?y('form[data-facet-field-type="checkbox"]',g).each(function(){var t,e=Object.create(y(this).data());void 0!==e.facetFieldName&&""!==e.facetFieldName&&(t=y(this).data("facetFieldName"),delete e.facetFieldName,k.addFilterObject(t,e),y(".filter-select-default input",this).each(function(){k.addFilterValue(t,y(this).val())}))}):0<c.length&&(y('form[data-facet-field-type="select"]',g).each(function(){var t,e=Object.create(y(this).data());void 0!==e.facetFieldName&&""!==e.facetFieldName&&(t=y(this).data("facetFieldName"),delete e.facetFieldName,k.addFilterObject(t,e),y("select",this).val())&&k.addFilterValue(t,y("select",this).val())}),y('form[data-facet-field-type="datalist"]',g).each(function(){var t,e=Object.create(y(this).data());void 0!==e.facetFieldName&&""!==e.facetFieldName&&(t=y(this).data("facetFieldName"),delete e.facetFieldName,k.addFilterObject(t,e),y("input",this).val())&&k.addFilterValue(t,y("input",this).val())}))},u=function(t,e,i,a){var s,l;(void 0!==t&&t||void 0!==e&&e)&&void 0!==i&&i&&void 0!==a&&a&&(l=y('[data-target-name="'+e+'"]',o).length,s=y('[data-target-name="'+e+'"][data-target-value="'+i+'"]',o).length,1==l&&0===s&&y('[data-target-name="'+e+'"]',o).parent().remove(),0===s)&&(l='<li class="filter__active-item"><a title="'+a+'" class="filter__active-item-link"',t&&(l+=' data-target-id="#'+t+'"'),e&&(l+=' data-target-name="'+e+'"'),o.append(l+=' data-target-value="'+i+'">'+a+"</a></li>"))},f=function(t,e){void 0!==t&&t?y('[data-target-id="#'+t+'"]',o).parent().remove():void 0!==e&&e&&y('[data-target-name="'+e+'"]',o).parent().remove()},p=function(t){var e,i={},a=null,t=y(t),s=t.attr("id"),l=t.attr("name"),n=null,c=t.attr("type"),o=null,d=null,r=t.closest("form").data("facet-field-type"),h=null,u=null;"checkbox"==c?(n="#"+(a=s),o=t.prop("checked"),d=t.val()):"radio"==c&&t.closest(".filter-compact__dropdown-check").hasClass("has-monthpicker")?(a=l,n="#"+s,o=t.prop("checked"),d=t.val(),0<(u=y(e='[data-target-id="'+n+'"]')).length&&(h={name:"monthpicker",selector:e,selectedTime:null!==u.MonthPicker("GetSelectedDate")?u.MonthPicker("GetSelectedDate").getTime():""})):"radio"==c&&(a=l,n="#"+s,o=t.prop("checked"),d=t.val()),null!==a&&null!==n&&(k.addHistoryValue(a,{id:s,name:l,type:c,selector:n,facetFieldType:r,checked:o,value:d,plugin:h}),(i=null!==history.state&&"object"==typeof history.state?history.state:i)[v]=k.getHistoryValueList(),history.replaceState(i,""))},y("input:radio",a).on("change",function(t){t.preventDefault();var t=a.find('[data-bs-toggle="dropdown"]'),e=y(this).next("label").text();t.text(e),h()}),y("a",s).on("click",function(t){t.preventDefault(),0<y("> ul > li",e).length?k.setListOffset(y("> ul > li",e).length):0<y("> table > tbody > tr",e).length?k.setListOffset(y("> table > tbody > tr",e).length):0<y("> .news__item",e).length?k.setListOffset(y("> .news__item",e).length):0<y(".irregulargrid-nojs-3-col",e).length&&k.setListOffset(y(".irregulargrid-nojs-3-col",e).length),h()}),n.on("change",'.filter-compact__dropdown form[data-facet-field-type="checkbox"] input:checkbox',function(t){t.preventDefault();var t=y(this).attr("id"),e=y(this).data("facet-field"),i=y(this).attr("value"),a=y(this).next("label").text();y(this).prop("checked")?(k.addFilterValue(e,i),u(t,!1,i,a)):(k.removeFilterValue(e,i),f(t,!1)),clearTimeout(d),d=setTimeout(function(){h()},m.filterTime)}),n.on("change",'.filter-compact__dropdown form[data-facet-field-type="date"] .filter-compact__dropdown-check input:radio',function(t){t.preventDefault();var t=y(this).attr("name"),e=y(this).data("facet-field"),i=y(this).attr("value"),a=y(this).next("label").text();k.removeFilterValues(e),!y(this).parent().hasClass("has-monthpicker")&&y(this).prop("checked")?(k.addFilterValue(e,i),u(!1,t,i,a)):y(this).prop("checked")||f(!1,t),y(this).parent().hasClass("has-monthpicker")&&(!y(this).parent().hasClass("has-monthpicker")||y(this).prop("checked"))||(clearTimeout(d),d=setTimeout(function(){h()},m.filterTime))}),y(".monthpicker",n).on("plugin.change",function(t){t.preventDefault();var t=y(this).data("target-id"),e=y(this).MonthPicker("GetSelectedDate").getTime(),i=y(t).attr("name"),a=y(t).data("facet-field"),s=y(this).val(),l=y(t).next("label").text()+" "+s;y(t).val(s),k.removeFilterValues(a),k.addFilterValue(a,e),u(!1,i,s,l),clearTimeout(d),d=setTimeout(function(){h()},m.filterTime)}),y(".filter-compact__dropdown-reset",n).on("click",function(t){t.preventDefault(),y(this,n).closest('form[data-facet-field-type="checkbox"],form[data-facet-field-type="date"]').find("input:checked").prop("checked",!1).trigger("change")}),o.on("click",".filter__active-item-link",function(t){var e,i,a,s,l;t.preventDefault(),t=y(this).data("target-id"),e=y(this).data("target-name"),i=y(this).data("target-value"),void 0!==t&&t?(s=(a=y(t+'[value="'+i+'"]')).attr("id"),l=a.attr("type")):void 0!==e&&e&&(s=(a=y('[name="'+e+'"][value="'+i+'"]')).attr("id"),l=a.attr("type")),void 0!==l&&"checkbox"==l?a.trigger("click"):void 0!==l&&"radio"==l&&a.closest(".filter-compact__dropdown-check").hasClass("has-monthpicker")?(a.removeAttr("value"),a.prop("checked",!1).trigger("change"),1==y('[data-target-id="#'+s+'"]').length&&y('[data-target-id="#'+s+'"]').val("")):void 0!==l&&"radio"==l&&a.prop("checked",!1).trigger("change")}),g.on("click",".filter__active-items-reset",function(t){t.preventDefault(),y(".filter__active-item-link",o).trigger("click")}),n.on("change",".filter-compact__dropdown form input:checkbox, .filter-compact__dropdown form .filter-compact__dropdown-check:not(.has-monthpicker) input:radio",function(t){t.preventDefault(),void 0!==y(this).attr("value")&&p(this)}),n.on("change",".filter-compact__dropdown form .filter-compact__dropdown-check.has-monthpicker input:radio:not(:checked)",function(t){t.preventDefault(),p(this)}),y(".monthpicker",n).on("plugin.change",function(){var t=y(this).data("target-id");1==y(t).length&&p(y(t).get(0))}),l.on("plugin.change",".filter-select-all input",function(){var t,e=y(this).closest("form"),i=e.data();void 0!==i.facetFieldName&&""!==i.facetFieldName&&(t=i.facetFieldName,k.removeFilterValues(t),y(".filter-select-default input",e).each(function(){k.addFilterValue(t,y(this).val())}),clearTimeout(d),d=setTimeout(function(){h()},m.filterTime))}),l.on("plugin.change",".filter-select-default input",function(){var t=y(this).data("facet-field"),e=y(this).val();void 0!==t&&void 0!==e&&(y(this).prop("checked")?(1==y(".filter-select-default input:checked",l).length&&k.removeFilterValues(t),k.addFilterValue(t,e)):k.removeFilterValue(t,e),clearTimeout(d),d=setTimeout(function(){h()},m.filterTime))}),c.on("submit","form",function(t){t.preventDefault()}),c.on("change","select",function(){var t,e,i=y(this).closest("form").data();void 0!==i.facetFieldName&&""!==i.facetFieldName&&"undefined"!==this.selectize&&(i=i.facetFieldName,t=this.selectize.getValue(),e=this.selectize.getOption(t).data("facet-value"),k.removeFilterValues(i),""!==t&&"undefined"!==e&&k.addFilterValue(i,e),clearTimeout(d),d=setTimeout(function(){h()},m.filterTime))}),y(g).on("click",".list-inline-popup-link",function(t){t.preventDefault(),y(this).magnificPopup({type:"inline",closeBtnInside:!1,mainClass:"mfp-fade",callbacks:{beforeOpen:function(){var t=this.st.el,e=g.find('[data-plugin="listing"][data-subtemplate="modal"]');e.data("search",t.data("search")),e.trigger("plugin.load")}}}).magnificPopup("open")}),g.on("plugin.load",function(t){t.stopPropagation(),void 0!==g.data("search")&&(k.setSearchValueList(g.data("search")),e.empty(),h())}),k.getSearchValueList()&&(V(),L(),h()))})};var F=function(){this.connection={host:webappUrl,path:"listing/listing.proxy.php?callback=?",dataType:"jsonp",jsonp:"json.wrf"},this.debug=null,this.index=null,this.sectionId=null,this.template=null,this.subtemplate=null,this.cmsLanguage=null,this.cmsNativeLanguage=null,this.pimLanguage=null,this.searchValueList=null,this.columnOptionList=null,this.filterPanelList=null,this.filterValueList=null,this.historyValueList=null,this.listLimit=null,this.listOffset=null,this.listRows=null,this.cmsPreviewClient=null,this.getConnection=function(){return this.connection},this.setConnection=function(t){this.connection=y.extend(this.connection,t)},this.getDebug=function(){return this.debug},this.setDebug=function(t){this.debug=t},this.getIndex=function(){return this.index},this.setIndex=function(t){this.index=t},this.getSectionId=function(){return this.sectionId},this.setSectionId=function(t){this.sectionId=t},this.getTemplate=function(){return this.template},this.setTemplate=function(t){this.template=t},this.getSubtemplate=function(){return this.subtemplate},this.setSubtemplate=function(t){this.subtemplate=t},this.getCmsLanguage=function(){return this.cmsLanguage},this.setCmsLanguage=function(t){this.cmsLanguage=t},this.getCmsNativeLanguage=function(){return this.cmsNativeLanguage},this.setCmsNativeLanguage=function(t){this.cmsNativeLanguage=t},this.getCmsPageId=function(){return this.cmsPageId},this.setCmsPageId=function(t){this.cmsPageId=t},this.getSearchValueList=function(){return this.searchValueList},this.setSearchValueList=function(t){this.searchValueList=t},this.getColumnOptionList=function(){return this.columnOptionList},this.setColumnOptionList=function(t){this.columnOptionList=t},this.getFilterValueList=function(){return this.filterValueList},this.setFilterValueList=function(t){this.filterValueList=t},this.addFilterObject=function(t,e){null===this.filterValueList&&(this.filterValueList={}),void 0===this.filterValueList[t]&&(this.filterValueList[t]=e,this.filterValueList[t].facetFieldValues=[])},this.removeFilterObject=function(t){void 0!==this.filterValueList[t]&&delete this.filterValueList[t]},this.addFilterValue=function(t,e){null!==this.filterValueList&&void 0!==this.filterValueList[t]&&this.filterValueList[t].facetFieldValues.push(e)},this.removeFilterValue=function(t,e){null!==this.filterValueList&&void 0!==this.filterValueList[t]&&this.filterValueList[t].facetFieldValues.splice(this.filterValueList[t].facetFieldValues.indexOf(e),1)},this.addFilterValues=function(t,e){null!==this.filterValueList&&void 0!==this.filterValueList[t]&&(this.filterValueList[t].facetFieldValues=e)},this.removeFilterValues=function(t){null!==this.filterValueList&&void 0!==this.filterValueList[t]&&(this.filterValueList[t].facetFieldValues=[])},this.getHistoryValueList=function(){return this.historyValueList},this.setHistoryValueList=function(t){this.historyValueList=t},this.addHistoryValue=function(t,e){null===this.historyValueList&&(this.historyValueList={}),this.historyValueList[t]=e},this.removeHistoryValue=function(t){null!==this.historyValueList&&void 0!==this.historyValueList[t]&&delete this.historyValueList[t]},this.getFilterPanelList=function(){return this.filterPanelList},this.setFilterPanelList=function(t){this.filterPanelList=t},this.addFilterPanelValue=function(t){null===this.filterPanelList&&(this.filterPanelList=[]),this.filterPanelList.push(t)},this.getListLimit=function(){return this.listLimit},this.setListLimit=function(t){this.listLimit=t},this.getListOffset=function(){return this.listOffset},this.setListOffset=function(t){this.listOffset=t},this.getListRows=function(){return this.listRows},this.setListRows=function(t){this.listRows=t},this.getCmsPreviewClient=function(){return this.cmsPreviewClient},this.setCmsPreviewClient=function(t){this.cmsPreviewClient=t},this.view=function(t){var e,i,a,s,l;switch(t){case"itemList":e={action:t,index:this.index,sectionId:this.sectionId,template:this.template,subtemplate:this.subtemplate,cmsLanguage:this.cmsLanguage,cmsNativeLanguage:this.cmsNativeLanguage,cmsPageId:this.cmsPageId,searchValueList:this.searchValueList,filterValueList:this.filterValueList,columnOptionList:this.columnOptionList,listLimit:this.listLimit,listOffset:this.listOffset,listRows:this.listRows,cmsPreviewClient:this.cmsPreviewClient};break;case"filterStatus":e={action:t,index:this.index,cmsLanguage:this.cmsLanguage,cmsNativeLanguage:this.cmsNativeLanguage,searchValueList:this.searchValueList,filterValueList:this.filterValueList,filterPanelList:this.filterPanelList}}if(e)return this.debug&&(s=e,l="",y.each(s,function(i,t){y.isPlainObject(t)?y.each(t,function(t,e){l+=i+"["+t+"]: "+e+"\n"}):l+=i+": "+t+"\n"}),console.log(l)),s=this.connection,a=e,a=y.ajax({url:s.host+s.path,dataType:s.dataType,jsonp:s.jsonp,cache:null,data:a}).fail(function(t,e,i){}),i=new y.Deferred,a.done(function(t){i.resolve(t)}),a.fail(function(t){i.reject(t)}),i.promise()},this.getUrlVars=function(t){var a={};return location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,e,i){a[e]=i}),t?a[t]:a}}}(jQuery);
//# sourceMappingURL=jquery.listing.min.js.map